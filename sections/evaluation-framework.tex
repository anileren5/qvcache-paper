\begin{figure}[h]
    \centering
    \includegraphics[width=\linewidth]{plots/noise_ratio_analysis/neighbor_overlap_analysis.pdf}
    \caption{\textbf{Neighbor overlap under perturbation (GIST, $k=10$).} Intersection of neighbor sets decays sharply, reaching near-zero at a 0.5 noise ratio. }
    \label{fig:overlap-analysis}
\end{figure}

\section{Evaluation Framework}
Real-world vector search workloads exhibit skewed access patterns \cite{298625SmartANN, incrementalivfindexmaintenance}, with spatially close queries recurring (i.e., \textit{temporal-semantic locality}), but existing systems are typically evaluated without accounting for this behavior, making such evaluations inadequate for assessing vector caches. Standard benchmarks execute each query only once and report aggregate metrics such as recall and latency, which is sufficient for evaluating standalone ANN systems but insufficient for understanding cache behavior. 

To address this, we propose a workload generation framework that produces query patterns with \textit{temporal-semantic locality} and tunable parameters. We first partition the base query set into $N_{\text{split}}$ disjoint subsets to model shifts in the regions targeted by queries. Within each subset, we generate perturbed variants for each query. For a query $q$, we sample a random vector $r$ from the dataset and produce  

\[
q' = (1-\eta) \cdot q + \eta \cdot r,
\]  

where $\eta$ controls the noise ratio. This interpolation yields queries that are semantically similar, i.e., spatially close, while remaining distinct, enabling realistic evaluation of vector caches.

To generate recurrence of spatially close queries, we employ a windowed query pattern. Each window consists of perturbed versions of $WINDOW\_SIZE$ base splits. Queries within the window are randomly shuffled and dispatched to the system by search threads, repeating $N_{\text{repeat}}$ times. After each repetition, $stride$ out of $WINDOW\_SIZE$ perturbed splits are replaced with new ones. This process continues until the window reaches the last splits, and the cycle can optionally be repeated $N_{\text{round}}$ times with fresh perturbed copies.

The parameter $WINDOW\_SIZE$ controls the working set size of the workload. $N_{\text{repeat}}$ measures short-term memory, i.e., the ability to capture cache hits within a small time window, while $N_{\text{round}}$ measures long-term memory across multiple cycles. The ratio $stride/WINDOW\_SIZE$ adjusts how quickly the working set evolves. Together, these parameters allow us to generate workloads with varying locality and temporal characteristics, enabling realistic evaluation of vector caches.


\begin{figure*}[t]
    \centering
    \begin{subfigure}[t]{0.48\textwidth}
        \centering
        \input{figures/query_perturbation}
        \caption{Synthesizing Queries with Semantic (Spatial) Locality}
        \label{fig:query-perturbation}
    \end{subfigure}
    \hfill
    \begin{subfigure}[t]{0.48\textwidth}
        \centering
        \resizebox{0.8\textwidth}{!}{
            \input{figures/sliding_window_experiment}
        }
        \caption{Workload Generation with temporal-semantic Locality}
        \label{fig:sliding-window}
    \end{subfigure}
    \caption{Evaluation framework proposed in this paper for benchmarking vector caches, used to evaluate QVCache.}
    \label{fig:evaluation-framework}
\end{figure*}







